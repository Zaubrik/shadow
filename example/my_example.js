function convertDashToCamel(str){return str.replace(/-([a-z0-9])/g,(g=>g[1].toUpperCase()))}function convertCamelToDash(str){return str.replace(/([a-zA-Z0-9])(?=[A-Z])/g,"$1-").toLowerCase()}function assertTruthy(expr,msg=""){if(!expr){throw new ShadowError(msg)}}function assertString(input){return typeof input==="string"?input:typeof input==="number"?input.toString():""}class ShadowError extends Error{constructor(message){super(message);this.message=message;this.name=this.constructor.name}}function __default(n){for(var l,e,s=arguments,t=1,r="",u="",a=[0],c=function(n1){1===t&&(n1||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(n1?s[n1]:r):3===t&&(n1||r)?(a[1]=n1?s[n1]:r,t=2):2===t&&"..."===r&&n1?a[2]=Object.assign(a[2]||{},s[n1]):2===t&&r&&!n1?(a[2]=a[2]||{})[r]=!0:t>=5&&(5===t?((a[2]=a[2]||{})[e]=n1?r?r+s[n1]:s[n1]:r,t=6):(n1||r)&&(a[2][e]+=n1?r+s[n1]:r)),r=""},h=0;h<n.length;h++){h&&(1===t&&c(),c(h));for(var i=0;i<n[h].length;i++)l=n[h][i],1===t?"<"===l?(c(),a=[a,"",null],t=3):r+=l:4===t?"--"===r&&">"===l?(t=1,r=""):r=l+r[0]:u?l===u?u="":r+=l:'"'===l||"'"===l?u=l:">"===l?(c(),t=1):t&&("="===l?(t=5,e=r,r=""):"/"===l&&(t<5||">"===n[h][i+1])?(c(),3===t&&(a=a[0]),t=a,(a=a[0]).push(this.apply(null,t.slice(1))),t=0):" "===l||"\t"===l||"\n"===l||"\r"===l?(c(),t=2):r+=l),3===t&&"!--"===r&&(t=4,a=a[0])}return c(),a.length>2?a.slice(1):a[1]}const SVG_NS="http://www.w3.org/2000/svg";function isArrayOfListeners(input){return input.every((i=>typeof i==="function"))}function isSpecialKey(input){return input==="id"||input==="class"}function isHReturn(input){return typeof input==="object"&&input!==null&&(input.element instanceof HTMLElement||input.element instanceof SVGElement)}function h(type,props,...children){const eventsAndListeners=[];const queries=[];const collection=[];const element=type==="svg"?document.createElementNS(SVG_NS,"svg"):document.createElement(type);for(const key in props){if(typeof props[key]==="function"){eventsAndListeners.push({event:key,listener:props[key]})}else if(Array.isArray(props[key])&&isArrayOfListeners(props[key])){props[key].forEach((listener=>eventsAndListeners.push({event:key,listener:listener})))}else if(key[0]==="@"){const idOrClass=key.slice(1);if(isSpecialKey(idOrClass)){queries.push({kind:idOrClass,selector:props[key]});element.setAttribute(idOrClass,props[key])}}else if(props[key]===true){element.setAttribute(key,"")}else if(typeof props[key]==="object"&&props[key]!==null){element.setAttribute(key,JSON.stringify(props[key]))}else if(typeof props[key]==="string"){element.setAttribute(key,props[key])}}if(type==="svg"){element.innerHTML=children.flat(2).reduce(((acc,child)=>acc+(isHReturn(child)?child.element.innerHTML:assertString(child))),"")}else{for(const child of children.flat(2)){if(isHReturn(child)){collection.push(...child.collection);element.appendChild(child.element)}else{const str=assertString(child);if(str)element.appendChild(document.createTextNode(str))}}}if(queries.length||eventsAndListeners.length){collection.push({target:element,queries:queries,eventsAndListeners:eventsAndListeners})}return{element:element,collection:collection}}const html=__default.bind(h);function isNull(input){return input===null}class Shadow extends HTMLElement{renderingCount=0;waitingList=new Set;accessorsStore=new Map;connected=false;dom={id:{},class:{}};constructor(){super();this.attachShadow({mode:"open"});if(this.firstUpdated){this.addEventListener("_update",(event=>{this.firstUpdated(event)}),{once:true})}if(this.updated){this.addEventListener("_update",(event=>{this.updated(event)}))}}connectedCallback(){this.init(this.propertiesAndOptions||[])}attributeChangedCallback(name,oldValue,newValue){if(newValue===oldValue)return;else return this.update(name,newValue)}updateAttribute(attributeName,value){if(value===null)return this.removeAttribute(attributeName);else{return typeof value==="string"?this.setAttribute(attributeName,value):this.setAttribute(attributeName,JSON.stringify(value))}}init(propertiesAndOptions){propertiesAndOptions.forEach((({property:property,reflect:reflect=true,render:render=true,wait:wait=false,assert:assert=false})=>{if(wait&&!this.connected){this.waitingList.add(property)}else if(assert){assertTruthy(this[property],`The property ${property} must have a truthy value.`)}this.accessorsStore.set(property,this[property]);if(reflect&&isNull(this.getAttribute(property))){this.updateAttribute(convertCamelToDash(property),this[property])}Object.defineProperty(this,property,{get:()=>this.accessorsStore.get(property),set:value=>{const attributeName=convertCamelToDash(property);const attributeValue=this.getAttribute(attributeName);this.accessorsStore.set(property,value);if(wait){this.waitingList.delete(property);if(assert){assertTruthy(this[property],`The property ${property} must have a truthy value.`)}if(this.waitingList.size===0){if(!this.connected)this.connected=true}}if(reflect&&attributeValue!==value&&attributeValue!==JSON.stringify(value)){this.updateAttribute(attributeName,value)}if(this.connected&&render){this.actuallyRender()}}})}));if(this.waitingList.size===0){if(!this.connected)this.connected=true;this.actuallyRender()}}update(name,newValue){const property=convertDashToCamel(name);assertTruthy(property in this,`The property '${property}' doen't exist.`);if(this[property]!==newValue&&JSON.stringify(this[property])!==newValue){try{this[property]=isNull(newValue)?newValue:JSON.parse(newValue)}catch{this[property]=newValue}}}createFragment(...input){const documentFragment=document.createDocumentFragment();input.flat(2).forEach((data=>{if(isHReturn(data)){const{element:element,collection:collection}=data;documentFragment.appendChild(element);collection.forEach((({target:target,queries:queries,eventsAndListeners:eventsAndListeners})=>{queries.forEach((({kind:kind,selector:selector})=>kind==="id"?this.dom.id[selector]=target:this.dom.class[selector]?this.dom.class[selector].push(target):this.dom.class[selector]=[target]));eventsAndListeners.forEach((({event:event,listener:listener})=>target.addEventListener(event,listener.bind(this))))}))}else{documentFragment.appendChild(document.createTextNode(assertString(data)))}}));return documentFragment}actuallyRender(){if(this.renderingCount>0)this.dom={id:{},class:{}};const documentFragment=this.createFragment(this.render());while(this.shadowRoot.firstChild){this.shadowRoot.removeChild(this.shadowRoot.firstChild)}this.shadowRoot.appendChild(documentFragment);this.constructor.styles.forEach((template=>this.shadowRoot.append(template.content.cloneNode(true))));this.dispatchEvent(new CustomEvent("_update"));this.renderingCount++}static styles=[]}function createHtmlTemplate(html1){const template=document.createElement("template");template.innerHTML=html1.trim();return template}function css(strings,...values){const cssTemplates=[];cssTemplates.push(createHtmlTemplate(`<style>${values.reduce(((acc,value,i)=>{if(value instanceof HTMLTemplateElement){cssTemplates.push(value);return acc+strings[i+1]}else{return acc+value+strings[i+1]}}),strings[0])}</style>`));return cssTemplates}function customElement(tagName){return clazz=>{assertTruthy(typeof clazz==="function","Something went wrong with the 'customElement' decorator.");Object.defineProperty(clazz,"is",{value:tagName});window.customElements.define(tagName,clazz);return clazz}}function property({reflect:reflect=true,render:render=true,wait:wait=false,assert:assert=false}={}){return(protoOrDescriptor,name)=>{assertTruthy(name,"The property name must be a non-empty string");if(reflect===true){const observedAttributesArray=protoOrDescriptor.constructor.observedAttributes||[];observedAttributesArray.push(convertCamelToDash(name));Object.defineProperty(protoOrDescriptor.constructor,"observedAttributes",{enumerable:true,configurable:true,get(){return observedAttributesArray}})}if(!protoOrDescriptor.propertiesAndOptions){Object.defineProperty(protoOrDescriptor,"propertiesAndOptions",{enumerable:false,configurable:true,writable:false,value:[]})}protoOrDescriptor.propertiesAndOptions.push({property:name,reflect:reflect,render:render,wait:wait,assert:assert})}}function _applyDecoratedDescriptor(target,property1,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]}));desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if("value"in desc||desc.initializer){desc.writable=true}desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property1,desc)||desc}),desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined}if(desc.initializer===void 0){Object.defineProperty(target,property1,desc);desc=null}return desc}function _initializerDefineProperty(target,property1,descriptor,context){if(!descriptor)return;Object.defineProperty(target,property1,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}var _class,_descriptor,_descriptor1,_descriptor2,_descriptor3;var _dec=property(),_dec1=property(),_dec2=property(),_dec3=property({reflect:false,wait:true}),_dec4=customElement("my-example");let MyExample1=_class=_dec4(((_class=class MyExample1 extends Shadow{static styles=css`\n    h1 {\n      color: blue;\n    }\n    #myButton {\n      border-radius: 30px;\n    }\n    .text {\n      margin:50px;\n      color: brown;\n    }\n    .myLi {\n      width: 200px;\n    }\n  `;render(){return html`<h1>${this.h1Content}</h1>\n    <button id=myButton click=${this.clickHandler}>Count</button>\n      <p class=text>You can change values through...</p>\n      <p class=text>${this.firstContent}</p>\n      <p class=text>${this.secondContent}</p>\n      <ul>\n        ${this.items.map((item=>html`<li @class=myLi>${item}</li>`))}\n      </ul>`}updated(){const colors=["yellow","green","pink","red","blue","orange"];this.dom.class["myLi"].forEach(((li,i)=>setInterval((()=>li.style.background=colors[Math.floor(Math.random()*(5-0+1))+0]),500)))}clickHandler(e){return this.h1Content++}constructor(...args){super(...args);_initializerDefineProperty(this,"h1Content",_descriptor,this);_initializerDefineProperty(this,"firstContent",_descriptor1,this);_initializerDefineProperty(this,"secondContent",_descriptor2,this);_initializerDefineProperty(this,"items",_descriptor3,this)}})||_class,_descriptor=_applyDecoratedDescriptor(_class.prototype,"h1Content",[_dec],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),_descriptor1=_applyDecoratedDescriptor(_class.prototype,"firstContent",[_dec1],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),_descriptor2=_applyDecoratedDescriptor(_class.prototype,"secondContent",[_dec2],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),_descriptor3=_applyDecoratedDescriptor(_class.prototype,"items",[_dec3],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),_class))||_class;export{MyExample1 as MyExample};
